<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Spotify Categories & Playlists</title>
  <link rel="stylesheet" href="style/index.css" />
</head>
<body>
  <div class="header-bar">
    <h1>Spotify Music Categories</h1>
    <a href="my_playlists.html" class="link my-playlist">My Playlist</a>
  </div>
  <div class="categories" id="categories"></div>

  <script>
/*
  Note:
  For security purposes, the Spotify Client ID and Client Secret are not included in this repository. 
  Please create your own Spotify Developer account and register an application to obtain these credentials. 
  Make sure to store them securely (e.g., using environment variables or a server-side authentication flow) 
  instead of hardcoding them in the client-side code.
*/

    // Spotify API credentials
    const clientId = "YOUR_CLIENT_ID"; // Replace with your actual Client ID
    const clientSecret = "YOUR_CLIENT_SECRET"; // Replace with your actual Client Secret
    

    // Function to get Spotify access token using Client Credentials
    async function getAccessToken() {
      const response = await fetch("https://accounts.spotify.com/api/token", {
        method: "POST",
        headers: {
          "Content-Type": "application/x-www-form-urlencoded"
        },
        body: `grant_type=client_credentials&client_id=${clientId}&client_secret=${clientSecret}`
      });
      const data = await response.json();
      return data.access_token; // Return the token to use in the next request
    }

    // Function to fetch music categories from Spotify API
    async function getCategories() {
      const accessToken = await getAccessToken();
      const response = await fetch("https://api.spotify.com/v1/browse/categories", {
        headers: { Authorization: `Bearer ${accessToken}` }
      });
      const data = await response.json();
      displayCategories(data.categories.items, accessToken);
    }

    // Function to display the categories
    function displayCategories(categories, accessToken) {
      const container = document.getElementById("categories");
      container.innerHTML = "";
      categories.forEach((category) => {
        const div = document.createElement("div");
        div.className = "category";
        div.innerHTML = `
          <img src="${category.icons[0].url}" alt="${category.name}">
          <p>${category.name}</p>
          <button class="show-more" onclick="location.href='playlists.html?categoryId=${category.id}&categoryName=${encodeURIComponent(category.name)}'">
            Show More   </button>
          <div class="playlists-container"></div>
        `;
        container.appendChild(div);
      });
    }

    // Fetch and display categories when the page loads
    getCategories();
  </script>
</body>
</html>
